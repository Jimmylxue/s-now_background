"use strict";(self.webpackChunk_snow_program_background=self.webpackChunk_snow_program_background||[]).push([[906],{71656:function(k,A,e){e.r(A),e.d(A,{default:function(){return ce}});var B=e(67825),P=e.n(B),G=e(26068),f=e.n(G),K=e(90228),C=e.n(K),N=e(87999),$=e.n(N),d=e(48305),o=e.n(d),T=e(94287),w=e(47856),Se=e(45247),q=e(10753),z=e(58849),L=e(24805),Q=e(54613),_=e(17054),v=e(75271),p=e(76129),j=e(32299),V=e(42460),Fe=e(41324),r=e(52676);function ee(n){var t=n.open,i=n.onOk,S=n.onCancel,Z=n.type,F=n.user,g=j.Z.useForm(),D=o()(g,1),x=D[0];return(0,v.useEffect)(function(){F?x.setFieldsValue(F):x.resetFields()},[F]),(0,r.jsx)(V.Z,{title:Z==="ADD"?"\u6DFB\u52A0\u7528\u6237":"\u7F16\u8F91\u7528\u6237",open:t,onOk:x.submit,onCancel:S,children:(0,r.jsxs)(j.Z,{form:x,onFinish:function(I){i(I)},labelCol:{span:4},children:[(0,r.jsx)(j.Z.Item,{name:"username",label:"\u6635\u79F0",rules:[{required:!0}],children:(0,r.jsx)(L.Z,{})}),(0,r.jsx)(j.Z.Item,{name:"mobile",label:"\u624B\u673A\u53F7",rules:[{required:!0}],children:(0,r.jsx)(L.Z,{})}),(0,r.jsx)(j.Z.Item,{name:"email",label:"\u90AE\u7BB1",rules:[{required:!0}],children:(0,r.jsx)(L.Z,{})}),(0,r.jsx)(j.Z.Item,{name:"sex",label:"\u6027\u522B",children:(0,r.jsx)(z.Z,{defaultValue:p.m$.\u672A\u77E5,style:{width:120},options:[{value:p.m$.\u7537,label:"\u7537"},{value:p.m$.\u5973,label:"\u5973"}]})})]})})}var re=e(2033),U=e(70334),ne=e(66029),te=e(39147);function se(n){var t=n.params,i=t===void 0?{letterId:0,status:1}:t,S=n.open,Z=n.onOk,F=n.onCancel,g=j.Z.useForm(),D=o()(g,1),x=D[0],M=(0,re.UI)(["recordUser"],i,{enabled:!!(i!=null&&i.letterId),refetchOnWindowFocus:!1}),I=M.data,W=M.refetch;(0,v.useEffect)(function(){S&&W()},[S]),console.log("userList",I);var J=[{title:"\u5934\u50CF",dataIndex:"avatar",key:"avatar",render:function(c){return(0,r.jsx)(ne.Z,{width:"30px",height:"30px",src:c})}},{title:"\u7528\u6237\u540D",dataIndex:"username",key:"name",render:function(c){return(0,r.jsx)("a",{children:c})}},{title:"\u6027\u522B",dataIndex:"sex",key:"sex",render:function(c){return(0,r.jsx)("span",{children:c===U.m$.\u7537?"\u7537":c===U.m$.\u5973?"\u5973":"-"})}},{title:"\u90AE\u7BB1",dataIndex:"mail",key:"mail"}];return(0,r.jsx)(V.Z,{title:"\u7528\u6237\u5217\u8868",open:S,onOk:Z,onCancel:F,children:(0,r.jsx)(te.Z,{columns:J,dataSource:I})})}var R=e(31098),E=e(90826);function ue(n,t,i){return(0,R.aM)(n,function(){return console.log("vvv",t),(0,E.U2)("/getUsers",t)},i)}function oe(n){return(0,R.Db)(function(t){return(0,E.v_)("/user/register",t)},n)}function ae(n){return(0,R.Db)(function(t){return(0,E.v_)("/updateUser",t)},n)}function le(n){return(0,R.Db)(function(t){return(0,E.v_)("/deleteUser",t)},n)}function ge(n){return useMutation(function(t){return post("/letter/sendSome",t)},n)}function Ie(n,t,i){return useQuery(n,function(){return post("/letter/record/user",t)},i)}var ie=["current","pageSize"],de=function(){var t=(0,v.useRef)("ADD"),i=(0,v.useRef)(),S=(0,v.useState)(!1),Z=o()(S,2),F=Z[0],g=Z[1],D=(0,v.useState)(!1),x=o()(D,2),M=x[0],I=x[1],W=(0,v.useRef)(),J=(0,v.useState)({current:1,size:10}),O=o()(J,2),c=O[0],Y=O[1],H=ue(["member",c],c,{onSuccess:function(){},refetchOnWindowFocus:!1}),y=H.data,X=H.refetch;console.log("data~",y);var b=function(){q.ZP.success("\u64CD\u4F5C\u6210\u529F"),X()},me=oe({onSuccess:b}),fe=me.mutateAsync,ve=ae({onSuccess:b}),xe=ve.mutateAsync,he=le({onSuccess:b}),pe=he.mutateAsync,je=[{title:"\u7528\u6237",dataIndex:"username",width:300,render:function(u,a){var l=a.username;return(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,r.jsx)("span",{className:" ml-2",children:l})})}},{title:"\u6027\u522B",dataIndex:"sex",width:80,renderText:function(u,a){var l=a.sex;return l===p.m$.\u7537?"\u7537":l===p.m$.\u5973?"\u5973":"-"},renderFormItem:function(){return(0,r.jsx)(z.Z,{options:p.J2})}},{title:"\u90AE\u7BB1",dataIndex:"email",width:150,renderText:function(u){return u||"-"},renderFormItem:function(){return(0,r.jsx)(L.Z,{})}},{title:"\u624B\u673A\u53F7",dataIndex:"mobile",width:150,renderText:function(u){return u||"-"},renderFormItem:function(){return(0,r.jsx)(L.Z,{})}},{title:"\u89D2\u8272",dataIndex:"role",width:80,renderText:function(u,a){var l=a.role,h=l;return h===U.SJ.\u7BA1\u7406\u5458?"\u7BA1\u7406\u5458":h===U.SJ.\u6CD5\u5B98?"\u6CD5\u5B98":h===U.SJ.\u4E70\u5BB6?"\u4E70\u5BB6":h===U.SJ.\u5356\u5BB6?"\u5356\u5BB6":"-"},renderFormItem:function(){return(0,r.jsx)(z.Z,{options:p.Ov})}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(u,a){return[(0,r.jsx)(Q.ZP,{type:"primary",onClick:function(){t.current="EDIT",i.current=a,g(!0)},children:"\u7F16\u8F91"}),(0,r.jsx)(_.Z,{placement:"top",title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",okText:"Yes",cancelText:"No",onConfirm:$()(C()().mark(function l(){return C()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,pe({id:a.id});case 2:case"end":return m.stop()}},l)})),children:(0,r.jsx)(Q.ZP,{type:"primary",children:"\u5220\u9664"})})]}}];return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(T._z,{children:[(0,r.jsx)(w.Z,{headerTitle:"\u7528\u6237\u5217\u8868",pagination:{showTotal:function(u){return"\u5171\u6709".concat(u,"\u6761\u8BB0\u5F55")},total:y==null?void 0:y.total,current:c.current,pageSize:c.size,onChange:function(u,a){return Y(f()(f()({},c),{},{current:u,size:a}))}},search:{labelWidth:120},request:function(u){var a=u.current,l=u.pageSize,h=P()(u,ie);Y(f()(f()({},h),{},{current:a,size:l})),X()},dataSource:(y==null?void 0:y.records)||[],toolBarRender:function(){return[]},columns:je},"id"),(0,r.jsx)(ee,{type:"ADD",user:i.current,onOk:function(){var s=$()(C()().mark(function u(a){var l;return C()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(t.current!=="ADD"){m.next=5;break}return m.next=3,fe(f()(f()({},a),{},{password:btoa(a.password)}));case 3:m.next=7;break;case 5:return m.next=7,xe(f()(f()({},a),{},{id:(l=i.current)===null||l===void 0?void 0:l.id}));case 7:g(!1);case 8:case"end":return m.stop()}},u)}));return function(u){return s.apply(this,arguments)}}(),onCancel:function(){g(!1)},open:F}),(0,r.jsx)(se,{params:W.current,open:M,onOk:function(){I(!1)},onCancel:function(){I(!1)}})]})})},ce=de},2033:function(k,A,e){e.d(A,{UI:function(){return $}});var B=e(31098),P=e(90826);function G(d,o,T){return useQuery(d,function(){return post("/message/list",o)},T)}function f(d){return useMutation(function(o){return post("/message/add",o)},d)}function K(d){return useMutation(function(o){return post("/message/update",o)},d)}function C(d){return useMutation(function(o){return post("/message/del",o)},d)}function N(d){return useMutation(function(o){return post("/letter/sendSome",o)},d)}function $(d,o,T){return(0,B.aM)(d,function(){return(0,P.v_)("/letter/record/user",o)},T)}}}]);
