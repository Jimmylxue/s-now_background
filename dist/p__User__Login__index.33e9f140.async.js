"use strict";(self.webpackChunk_snow_program_background=self.webpackChunk_snow_program_background||[]).push([[366],{23867:function(Xe,G,t){t.r(G),t.d(G,{default:function(){return Je}});var _=t(90228),B=t.n(_),ee=t(26068),I=t.n(ee),re=t(87999),K=t.n(re),ne=t(48305),Q=t.n(ne),te=t(22035),a=t(28484),c=t(75271),oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},le=oe,E=t(58720),ae=function(e,r){return c.createElement(E.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:r,icon:le}))},se=c.forwardRef(ae),ie=se,de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},ue=de,ce=function(e,r){return c.createElement(E.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:r,icon:ue}))},ve=c.forwardRef(ce),N=ve,me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},pe=me,ge=function(e,r){return c.createElement(E.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:r,icon:pe}))},he=c.forwardRef(ge),fe=he,O=t(46060),xe=t(49425),Pe=t(5263),Se=t(82187),ye=t.n(Se),Ze=t(56892),V=t(55250),je=t(60362),Ce=function(e){return(0,V.Z)((0,V.Z)({},e.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:e.colorTextSecondary,fontSize:e.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,V.Z)({},"".concat(e.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function Fe(o){return(0,je.Xj)("LoginForm",function(e){var r=(0,a.Z)((0,a.Z)({},e),{},{componentCls:".".concat(o)});return[Ce(r)]})}var n=t(52676),Te=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function Ae(o){var e,r=o.logo,s=o.message,i=o.contentStyle,v=o.title,g=o.subTitle,h=o.actions,d=o.children,f=o.containerStyle,m=o.otherStyle,l=(0,O.Z)(o,Te),Z=(0,xe.YB)(),y=l.submitter===!1?!1:(0,a.Z)((0,a.Z)({searchConfig:{submitText:Z.getMessage("loginForm.submitText","\u767B\u5F55")}},l.submitter),{},{submitButtonProps:(0,a.Z)({size:"large",style:{width:"100%"}},(e=l.submitter)===null||e===void 0?void 0:e.submitButtonProps),render:function(T,z){var w,u=z.pop();if(typeof(l==null||(w=l.submitter)===null||w===void 0?void 0:w.render)=="function"){var A,$;return l==null||(A=l.submitter)===null||A===void 0||($=A.render)===null||$===void 0?void 0:$.call(A,T,z)}return u}}),S=(0,c.useContext)(Pe.ZP.ConfigContext),p=S.getPrefixCls("pro-form-login"),j=Fe(p),x=j.wrapSSR,F=j.hashId,P=function(T){return"".concat(p,"-").concat(T," ").concat(F)},C=(0,c.useMemo)(function(){return r?typeof r=="string"?(0,n.jsx)("img",{src:r}):r:null},[r]);return x((0,n.jsxs)("div",{className:ye()(P("container"),F),style:f,children:[(0,n.jsxs)("div",{className:"".concat(P("top")," ").concat(F).trim(),children:[v||C?(0,n.jsxs)("div",{className:"".concat(P("header")),children:[C?(0,n.jsx)("span",{className:P("logo"),children:C}):null,v?(0,n.jsx)("span",{className:P("title"),children:v}):null]}):null,g?(0,n.jsx)("div",{className:P("desc"),children:g}):null]}),(0,n.jsxs)("div",{className:P("main"),style:(0,a.Z)({width:328},i),children:[(0,n.jsxs)(Ze.A,(0,a.Z)((0,a.Z)({isKeyPressSubmit:!0},l),{},{submitter:y,children:[s,d]})),h?(0,n.jsx)("div",{className:P("main-other"),style:m,children:h}):null]})]}))}var J=t(3392),Oe=t(59030),X=t(32299),be=t(49696),Me=t(71770),b=t(53403),ze=["fieldProps","proFieldProps"],Be=["fieldProps","proFieldProps"],R="text",Re=function(e){var r=e.fieldProps,s=e.proFieldProps,i=(0,O.Z)(e,ze);return(0,n.jsx)(b.Z,(0,a.Z)({valueType:R,fieldProps:r,filedConfig:{valueType:R},proFieldProps:s},i))},Le=function(e){var r=(0,Oe.Z)(e.open||!1,{value:e.open,onChange:e.onOpenChange}),s=(0,J.Z)(r,2),i=s[0],v=s[1];return(0,n.jsx)(X.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(h){var d,f=h.getFieldValue(e.name||[]);return(0,n.jsx)(be.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(l){return l&&l.parentNode?l.parentNode:l},onOpenChange:function(l){return v(l)},content:(0,n.jsxs)("div",{style:{padding:"4px 0"},children:[(d=e.statusRender)===null||d===void 0?void 0:d.call(e,f),e.strengthText?(0,n.jsx)("div",{style:{marginTop:10},children:(0,n.jsx)("span",{children:e.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},e.popoverProps),{},{open:i,children:e.children}))}})},we=function(e){var r=e.fieldProps,s=e.proFieldProps,i=(0,O.Z)(e,Be),v=(0,c.useState)(!1),g=(0,J.Z)(v,2),h=g[0],d=g[1];return r!=null&&r.statusRender&&i.name?(0,n.jsx)(Le,{name:i.name,statusRender:r==null?void 0:r.statusRender,popoverProps:r==null?void 0:r.popoverProps,strengthText:r==null?void 0:r.strengthText,open:h,onOpenChange:d,children:(0,n.jsx)("div",{children:(0,n.jsx)(b.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,Me.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(m){var l;r==null||(l=r.onBlur)===null||l===void 0||l.call(r,m),d(!1)},onClick:function(m){var l;r==null||(l=r.onClick)===null||l===void 0||l.call(r,m),d(!0)}}),proFieldProps:s,filedConfig:{valueType:R}},i))})}):(0,n.jsx)(b.Z,(0,a.Z)({valueType:"password",fieldProps:r,proFieldProps:s,filedConfig:{valueType:R}},i))},H=Re;H.Password=we,H.displayName="ProFormComponent";var M=H,Y=t(14923),q=t(7697),Ie=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],Ee=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],Ne=function(e,r){var s=e.fieldProps,i=e.children,v=e.params,g=e.proFieldProps,h=e.mode,d=e.valueEnum,f=e.request,m=e.showSearch,l=e.options,Z=(0,O.Z)(e,Ie),y=(0,c.useContext)(q.Z);return(0,n.jsx)(b.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,Y.h)(d),request:f,params:v,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({options:l,mode:h,showSearch:m,getPopupContainer:y.getPopupContainer},s),ref:r,proFieldProps:g},Z),{},{children:i}))},Ve=c.forwardRef(function(o,e){var r=o.fieldProps,s=o.children,i=o.params,v=o.proFieldProps,g=o.mode,h=o.valueEnum,d=o.request,f=o.options,m=(0,O.Z)(o,Ee),l=(0,a.Z)({options:f,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},r),Z=(0,c.useContext)(q.Z);return(0,n.jsx)(b.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,Y.h)(h),request:d,params:i,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({getPopupContainer:Z.getPopupContainer},l),ref:e,proFieldProps:v},m),{},{children:s}))}),He=c.forwardRef(Ne),Ue=Ve,U=He;U.SearchSelect=Ue,U.displayName="ProFormComponent";var We=U,W=t(45247),D=t(10753),De=t(87391),ke=t(43943),$e=t(30967),Ge=t(1091),k=t(70334),Ke=(0,Ge.kc)(function(o){var e=o.token;return{action:{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:e.colorPrimaryActive}},lang:{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:e.borderRadius,":hover":{backgroundColor:e.colorBgTextHover}},container:{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}}),Qe=function(){var e=(0,c.useState)("login"),r=Q()(e,2),s=r[0],i=r[1],v=(0,W.useModel)("@@initialState"),g=v.setInitialState,h=Ke(),d=h.styles,f=X.Z.useForm(),m=Q()(f,1),l=m[0],Z=function(){var y=K()(B()().mark(function S(p){var j,x,F,P,C,L,T,z;return B()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s!=="login"){u.next=18;break}return u.next=3,(0,k.x4)(I()({},p));case 3:return j=u.sent,console.log("token",j),localStorage.setItem("token",j),u.next=8,(0,k.dQ)(p.username);case 8:return x=u.sent,console.log("user",x),localStorage.setItem("login-user",JSON.stringify(x)),D.ZP.success("\u767B\u5F55\u6210\u529F"),(0,$e.flushSync)(function(){g(function(A){return I()(I()({},A),{},{currentUser:x})})}),F=new URL(window.location.href).searchParams,W.history.push(F.get("redirect")||"/"),u.abrupt("return");case 18:if(console.log("values",p),P=p.username,C=p.password,L=p.confirmPassword,T=p.role,C===L){u.next=23;break}return D.ZP.error("\u4E24\u6B21\u5BC6\u7801\u8F93\u5165\u4E0D\u4E00\u81F4"),u.abrupt("return");case 23:return u.next=25,(0,k.z2)({username:P,password:C,role:T});case 25:z=u.sent,console.log("res",z),D.ZP.success("\u6CE8\u518C\u6210\u529F"),i("login");case 29:case"end":return u.stop()}},S)}));return function(p){return y.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:d.container,children:[(0,n.jsx)(W.Helmet,{children:(0,n.jsxs)("title",{children:["\u767B\u5F55","- ",ke.Z.title]})}),(0,n.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,n.jsxs)(Ae,{form:l,submitter:{searchConfig:{submitText:s==="login"?"\u767B\u5F55":"\u6CE8\u518C"}},contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,n.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"\u6CD5\u5EAD\u7BA1\u7406\u7CFB\u7EDF",subTitle:"\u73AF\u5883\u4F7F\u7528\u6DD8\u5B9D\u5C0F\u6CD5\u5EAD\u7BA1\u7406\u7CFB\u7EDF",initialValues:{autoLogin:!0},onFinish:function(){var y=K()(B()().mark(function S(p){return B()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,Z(p);case 2:case"end":return x.stop()}},S)}));return function(S){return y.apply(this,arguments)}}(),children:[(0,n.jsx)(De.Z,{activeKey:s,onChange:function(S){l.resetFields(),i(S)},centered:!0,items:[{key:"login",label:"\u767B\u5F55"},{key:"register",label:"\u6CE8\u518C"}]}),s==="login"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M,{name:"username",fieldProps:{size:"large",prefix:(0,n.jsx)(ie,{})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u7528\u6237\u540D\u662F\u5FC5\u586B\u9879\uFF01"}]}),(0,n.jsx)(M.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(N,{})},placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u662F\u5FC5\u586B\u9879\uFF01"}]})]}),s==="register"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M,{fieldProps:{size:"large",prefix:(0,n.jsx)(fe,{})},name:"username",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\uFF01",rules:[{required:!0,message:"\u7528\u6237\u540D\u662F\u5FC5\u586B\u9879"}]}),(0,n.jsx)(We,{name:"role",options:[{value:1,label:"\u7BA1\u7406\u5458"},{value:2,label:"\u6CD5\u5B98"},{value:3,label:"\u4E70\u5BB6"},{value:4,label:"\u5356\u5BB6"}],placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",rules:[{required:!0,message:"\u5FC5\u987B\u9009\u62E9\u4E00\u4E2A\u89D2\u8272"}]}),(0,n.jsx)(M.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(N,{})},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u662F\u5FC5\u586B\u9879\uFF01"}]}),(0,n.jsx)(M.Password,{name:"confirmPassword",fieldProps:{size:"large",prefix:(0,n.jsx)(N,{})},placeholder:"\u8BF7\u518D\u6B21\u786E\u8BA4\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u662F\u5FC5\u586B\u9879\uFF01"}]})]})]})}),(0,n.jsx)(te.$_,{})]})},Je=Qe}}]);
